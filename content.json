{"meta":{"title":"abelzzg","subtitle":"the blog as a personal recorder.","description":"this is a public blog recording some technologic personal articles.","author":"Abelzzg","url":"http://abelzzg.com"},"posts":[{"title":"anroid与服务器端保持会话方式","slug":"anroid与服务器端保持会话方式","date":"2016-03-01T03:39:06.000Z","updated":"2017-02-23T01:53:54.000Z","comments":true,"path":"2016/03/01/anroid与服务器端保持会话方式/","link":"","permalink":"http://abelzzg.com/2016/03/01/anroid与服务器端保持会话方式/","excerpt":"","text":"#anroid与服务器端保持会话方式 Android提供Http访问的方式有两种，一种是HttpClient，一种是HttpUrlConnection.这两种方式都可以通过sessionID的保存来保持和服务端的会话 ####httpClient其实保持HttpClient的请求Session，就是保证在每次Http请求访问的请求头信息的Cookie参数中，携带同一个JSESSIONID，只要保证每次是一样的，服务器就认为是同一Session，这就保持了Seesion会话。那么这个JSESSIONID是怎么来的呢，是服务器通过响应头信息给的，服务器在给客户端设置Cookie时，会通过响应头信息中的Set-Cookie参数传递回来，只要有新设置的Cookie，就是通过这个传递过来，如果没有则是null，那么就可以在请求完之后返回的信息里读取这个Set-Cookie头信息，然后保存起来，在下次请求的时候给服务器发送过去，就实现了保持Seesion的目的。代码如下： //定义储存Cookie信息 private String cookies; public void executeGet(String url) throws ClientProtocolException, IOException{ HttpClient httpClient=new DefaultHttpClient(); HttpGet httpGet=new HttpGet(url); setRequestCookies(httpGet); HttpResponse response=httpClient.execute(httpGet); appendCookies(response); } /** * 设置请求的Cookie头信息 * @param reqMsg */ private void setRequestCookies(HttpMessage reqMsg) { if(!TextUtils.isEmpty(cookies)){ reqMsg.setHeader(&quot;Cookie&quot;, cookies); } } /** * 把新的Cookie头信息附加到旧的Cookie后面 * 用于下次Http请求发送 * @param resMsg */ private void appendCookies(HttpMessage resMsg) { Header setCookieHeader=resMsg.getFirstHeader(&quot;Set-Cookie&quot;); if (setCookieHeader != null &amp;&amp; TextUtils.isEmpty(setCookieHeader.getValue())) { String setCookie=setCookieHeader.getValue(); if(TextUtils.isEmpty(cookies)){ cookies=setCookie; }else{ cookies=cookies+&quot;; &quot;+setCookie; } } } 当我们需要重新设置Seesion的时候，请求我们保存的cookie即可，这样代码就会重新获取。如果都有个账号并发备份，那么一个账号分配一个cookie变量存储即可，也就是把上面的代码放到一个如HttpManager管理的类里，每个账号的备份都可以new个HttpManager实例，这样每个账号都可以单独处理自己的Cookie，互不干扰。 ####HttpUrlConnection 获取Cookie： URL url = new URL(requrl); HttpURLConnection con= (HttpURLConnection) url.openConnection(); // 取得sessionid. String cookieval = con.getHeaderField(&quot;set-cookie&quot;); String sessionid; if(cookieval != null) { sessionid = cookieval.substring(0, cookieval.indexOf(&quot;;&quot;)); } //sessionid值格式：JSESSIONID=AD5F5C9EEB16C71EC3725DBF209F6178，是键值对，不是单指值发送设置cookie： URL url = new URL(requrl); HttpURLConnectioncon= (HttpURLConnection) url.openConnection(); if(sessionid != null) { con.setRequestProperty(&quot;cookie&quot;, sessionid); } 只要设置了sessionID，这样web服务器在接受请求的时候就会自动搜索对应的session了，从而保证了在同一会话Session。","raw":null,"content":null,"categories":[],"tags":[{"name":"tags","slug":"tags","permalink":"http://abelzzg.com/tags/tags/"}]},{"title":"第一篇blog","slug":"第一篇blog","date":"2016-02-22T08:39:06.000Z","updated":"2017-02-23T01:53:07.000Z","comments":true,"path":"2016/02/22/第一篇blog/","link":"","permalink":"http://abelzzg.com/2016/02/22/第一篇blog/","excerpt":"","text":"#为什么要有自己的博客 刚过完年回来，又是技术界的多事之春，金三银四的日子马上又要来了。公司组织架构变动很大，暂时还没有什么活干（因为年前冲绩效都干完了），不少同事选择了离职，撩得我也春心荡漾，想着能趁这个机会好好学习学习，总结巩固之前做的东西，然后…然后…哇哈哈（让我YY一下） ##上稀土掘金 去年开始天天刷稀土掘金，把黄易给卸载了，太浪费时间。掘金上发现好多大神都有自己的私人博客，有的甚至买了域名，好像很高大上。里面记录了一些自己做技术的心得和总结，也有不少是跟技术无关跟心态有关的，非常有意思。逐渐就看上看这些程序猿们的文章，有点志同道合的感觉，但是比起技术来，我就是个渣，但是比起屌丝，我就是屌王。 ##反思自己突然发现已经毕业三年了，居然没有自己的博客。刚毕业上csdn上写过几篇，可能是自己太肤浅了，毛还没长齐就想写技术博客，发现没有什么浏览量，后来也就懒得写了，再后来上csdn，发现我的文章被封了，不知道为啥，占用你们服务器的内存了吗？那我诚恳的向你们道歉！。都说技术3年是一个坎，要么默默无闻做技术宅男，要么升职加薪做上小领导。回头看看我，除了做android还凑合以外，基本没啥长处，去面试估计也不会有什么好的归宿，所以决心发奋图强开始写blog，监督自己不再虚度时光，况且程序员的职业生涯也不长，就连我妈都知道做这样要不停学习新技术，每天打电话就离不开要问我“最近有没有学习？”“还是要学一些东西的，要不然不好涨工资”。 ##关于写作技巧从小作文写不好，但是总是能抄到，能蒙混过关，后来抄多了发现，如果哪次考试是自己写的，还能拿到比抄的作文更高一些的分数，后来就变成自己写了，虽然也写不好，但是也算是锻炼。啰嗦完了，准备deploy吧，还没有原创，先把收藏在elephant里面的技术文章copy一下吧！哎，还得转成.md格式的，心累呀……","raw":null,"content":null,"categories":[],"tags":[]},{"title":"使用hexo遇到的坑","slug":"使用hexo遇到的坑","date":"2016-02-12T10:19:56.000Z","updated":"2017-02-23T01:53:44.000Z","comments":true,"path":"2016/02/12/使用hexo遇到的坑/","link":"","permalink":"http://abelzzg.com/2016/02/12/使用hexo遇到的坑/","excerpt":"","text":"#使用hexo时遇到的坑 ##hexo g命令报错 $hexo-blog hexo g INFO Start processing ERROR Process failed: _posts/Helloworld.md TypeError: Cannot read property ‘offset’ of null 这个问题就牛逼了，各种google、百度，用命令hexo g 时，报错Cannot read property ‘offset’ of null，刚开始以为是node版本问题，需要更新到最新版本。也有可能是我忽略了hexo的根目录下的json代码块 jsonContent: meta: false pages: false posts: title: true date: true path: true text: true raw: false content: false slug: false updated: false comments: false link: false permalink: false excerpt: false categories: false tags: true 需要加入到 _config.yml中。最后找到原因了–根目录的_config.yml文件中时区配置我改成了timezone: Asia/Beijing，这个改回Shanghai就ok了，具体为啥，我也没弄明白。 ###更新node方式如下 mac上OS11以后权限有所变化，输入sudo brew upgrade node命令后，会报错误提示，无法跟以前一样愉快地更新node Error: Running Homebrew as root is extremely dangerous and no longer supported. As Homebrew does not drop privileges on installation you would be giving all build scripts full access to your system. 所以要另求他法，链接在此 同时怕这个链接，年久失效，也在这里记录一下。 切记要按照步骤: 第一步，先查看本机node.js版本： $ node -v 第二步，清除node.js的cache： $ sudo npm cache clean -f 第三步，安装 n 工具，这个工具是专门用来管理node.js版本的，别怀疑这个工具的名字，是他是他就是他，他的名字就是 &quot;n&quot; $ sudo npm install -g n 第四步，安装最新版本的node.js $ sudo n stable 第五步，再次查看本机的node.js版本： $ node -v 这里的第一步和第五步完全可以省略，只是个人比较喜欢查看一下，满足自己的眼睛。第二步比较重要，有些可以省略有些就不行，一律使用准没错。如果你的sudo n stable第一还能下载node，但是下到一半就报错，然后再打一遍命令就没反应了。那也是因为os的版本太高了，做了文件读写的权限控制，所以上网搜一下怎么让sudo真正能获取root权限。这要靠你们自己动手了。 ##github发布后404本地运行成功后，满怀希望得deploy到github，激动地打了自己的域名abelzzg.github.io,居然404了，来回又看了两边命令是不是少了什么。之前我也没有注意到发布hexo到github的作者在写使用说明时，有一句 建立与你用户名对应的仓库，仓库名必须为【your_user_name.github.io】 额滴个神呐，费了我好一大段功夫（其实也就10分钟），可是心累呀。然后hexo的根目录上必须写成 deploy: type: git repo: https://github.com/Abelzzg/abelzzg.github.io.git branch: master 意思就是说我github上的库名字都建错了，删了重新来。然后就OK了。👏👏","raw":null,"content":null,"categories":[],"tags":[{"name":"tags","slug":"tags","permalink":"http://abelzzg.com/tags/tags/"}]},{"title":"helloworld","slug":"helloworld","date":"2016-01-22T08:39:06.000Z","updated":"2017-02-23T01:54:02.000Z","comments":true,"path":"2016/01/22/helloworld/","link":"","permalink":"http://abelzzg.com/2016/01/22/helloworld/","excerpt":"","text":"","raw":null,"content":null,"categories":[],"tags":[{"name":"tags","slug":"tags","permalink":"http://abelzzg.com/tags/tags/"}]}]}